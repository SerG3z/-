Чуть-чуть не по заданию, поэтому оставлю пока здесь. Переделаю чуть позже :p

UPD: тащемта всё норм, единственный минус - в структуру загружается вся строка целиком (целесообразней её просто вынести за структуру и сделать глобальной). но так и так - это не по заданию. в задании надо распределить куски строк по процессорам, но эта реализация через префикс-функцию, так шо не получится. пусть будет так. я думаю, что это не очень страшный минус реализации.
